-- Adminer 4.7.6 MySQL dump

SET NAMES utf8;
SET time_zone = '+00:00';
SET foreign_key_checks = 0;
SET sql_mode = 'NO_AUTO_VALUE_ON_ZERO';

SET NAMES utf8mb4;

DROP TABLE IF EXISTS `applications`;
CREATE TABLE `applications` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `stack_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `content` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

INSERT INTO `applications` (`id`, `stack_name`, `name`, `content`) VALUES
(1,	'database',	'mysql.yaml',	'version: \"3.7\"\n\nservices:\n  \n  mysql_node1:\n    image: bayrell/alpine_mariadb:10.4\n    command: --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci --sql-mode=\"\" --ft_min_word_len=1 --wait_timeout=600 --max_allowed_packet=1G\n    hostname: \"{{.Service.Name}}.{{.Task.ID}}.local\"\n    volumes:\n      - \"mysql_node1_data:/data\"\n    env_file:\n      - ../cloud_os/cloud_env.conf\n    deploy:\n      replicas: 1\n      endpoint_mode: dnsrr\n      update_config:\n        parallelism: 1\n        failure_action: rollback\n        delay: 5s\n      restart_policy:\n        condition: \"on-failure\"\n        delay: 10s\n        window: 120s\n      placement:\n        constraints:\n          - node.labels.name == docker0\n    networks:\n      - cloud_backend\n    logging:\n      driver: journald\n\nvolumes:\n  mysql_node1_data:\n\nnetworks:\n  cloud_backend:\n    external: true'),
(2,	'cloud_os',	'standard.yaml',	'version: \"3.7\"\n\nservices:\n  \n  standard:\n    image: bayrell/cloud_os_standard:0.3.0\n    hostname: \"{{.Service.Name}}.{{.Task.ID}}.local\"\n    volumes:\n      - \"standard_data:/data\"\n      - \"/var/run/docker.sock:/var/run/docker.sock:ro\"\n    env_file:\n      - ../cloud_os/cloud_env.conf\n    environment:\n      MYSQL_DB: \"cloud_os_standard\"\n    deploy:\n      replicas: 1\n      endpoint_mode: dnsrr\n      update_config:\n        parallelism: 1\n        failure_action: rollback\n        delay: 5s\n      restart_policy:\n        condition: \"on-failure\"\n        delay: 10s\n        window: 120s\n      placement:\n        constraints:\n          - node.labels.name == docker0\n    networks:\n      - cloud_backend\n    ports:\n      - target: 80\n      published: 8080\n      protocol: tcp\n      mode: host\n      - target: 22\n      published: 8022\n      protocol: tcp\n      mode: host\n    logging:\n      driver: journald\n\nvolumes:\n  standard_data:\n\nnetworks:\n  cloud_backend:\n    external: true\n'),
(3,	'dev',	'php.yaml',	'version: \"3.7\"\n\nservices:\n\n  php:\n    image: bayrell/alpine_php_fpm:7.3-3\n    hostname: \"{{.Service.Name}}.{{.Task.ID}}.local\"\n    volumes:\n      - \"php_data:/data\"\n    deploy:\n      replicas: 2\n      endpoint_mode: dnsrr\n      update_config:\n        parallelism: 1\n        failure_action: rollback\n        delay: 5s\n      restart_policy:\n        condition: \"on-failure\"\n        delay: 10s\n        window: 120s\n      placement:\n        constraints:\n          - node.labels.name == docker0\n    networks:\n      - cloud_frontend\n    logging:\n      driver: journald\n\nvolumes:\n  php_data:\n\nnetworks:\n  cloud_frontend:\n    external: true\n'),
(4,	'cloud_os',	'gateway.yaml',	'version: \"3.7\"\n\nservices:\n  \n  gateway:\n    image: bayrell/bus_gateway:0.3.0\n    hostname: \"{{.Service.Name}}.{{.Task.ID}}.local\"\n    env_file:\n      - ../cloud_os/cloud_env.conf\n    deploy:\n      replicas: 1\n      endpoint_mode: dnsrr\n      update_config:\n        parallelism: 1\n        failure_action: rollback\n        delay: 5s\n      restart_policy:\n        condition: \"on-failure\"\n        delay: 10s\n        window: 120s\n      placement:\n        constraints:\n          - node.labels.name == docker0\n    networks:\n      - cloud_backend\n      - cloud_frontend\n    logging:\n      driver: journald\n\n  rabbitmq:\n    image: rabbitmq:3.8.9-management\n    hostname: \"{{.Service.Name}}.{{.Task.ID}}.local\"\n    volumes:\n      - \"rabbitmq_data:/var/lib/rabbitmq\"\n    deploy:\n      replicas: 1\n      endpoint_mode: dnsrr\n      update_config:\n        parallelism: 1\n        failure_action: rollback\n        delay: 5s\n      restart_policy:\n        condition: \"on-failure\"\n        delay: 10s\n        window: 120s\n      placement:\n        constraints:\n          - node.labels.name == docker0\n    networks:\n      - cloud_backend\n    logging:\n      driver: journald\n\nvolumes:\n  rabbitmq_data:\n\nnetworks:\n  cloud_backend:\n    external: true\n  cloud_frontend:\n    external: true'),
(5,	'cloud_os',	'http.yaml',	'version: \"3.7\"\n\nservices:\n  \n  http:\n    image: bayrell/load_balancer_http:0.3.0\n    hostname: \"{{.Service.Name}}.{{.Task.ID}}.local\"\n    volumes:\n      - \"http_data:/data\"\n    env_file:\n      - ../cloud_os/cloud_env.conf\n    deploy:\n      replicas: 1\n      endpoint_mode: dnsrr\n      update_config:\n        parallelism: 1\n        failure_action: rollback\n        delay: 5s\n      restart_policy:\n        condition: \"on-failure\"\n        delay: 10s\n        window: 120s\n      placement:\n        constraints:\n          - node.labels.name == docker0\n    networks:\n      - cloud_frontend\n    ports:\n      - target: 80\n        published: 80\n        protocol: tcp\n        mode: host\n    logging:\n      driver: journald    \n    \nvolumes:\n  http_data:\n\nnetworks:\n  cloud_frontend:\n    external: true');

DROP TABLE IF EXISTS `cron`;
CREATE TABLE `cron` (
  `command` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `last_run` bigint(20) NOT NULL,
  PRIMARY KEY (`command`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

INSERT INTO `cron` (`command`, `last_run`) VALUES
('Bayrell.CloudOS.DockerTasks::cron',	1612808941);

DROP TABLE IF EXISTS `domains`;
CREATE TABLE `domains` (
  `domain_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `nginx_template` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `space_id` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`domain_name`),
  KEY `space_id` (`space_id`),
  CONSTRAINT `domains_ibfk_1` FOREIGN KEY (`space_id`) REFERENCES `spaces` (`space_id`) ON DELETE SET NULL ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

INSERT INTO `domains` (`domain_name`, `nginx_template`, `space_id`) VALUES
('cloud_os.local',	'server {\n	listen 80;\n	server_name %DOMAIN_NAME%;\n	root /usr/share/nginx/default;\n	index index.html;\n	autoindex off;\n%ROUTES%\n%SSL%\n}',	NULL);

DROP TABLE IF EXISTS `layers`;
CREATE TABLE `layers` (
  `layer_uid` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `layer_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `space_id` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`layer_uid`),
  KEY `space_id` (`space_id`),
  CONSTRAINT `layers_ibfk_1` FOREIGN KEY (`space_id`) REFERENCES `spaces` (`space_id`) ON DELETE SET NULL ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;


DROP TABLE IF EXISTS `nginx_files`;
CREATE TABLE `nginx_files` (
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `enable` tinyint(4) NOT NULL,
  `content` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `timestamp` bigint(20) NOT NULL,
  `is_deleted` tinyint(4) NOT NULL,
  PRIMARY KEY (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

INSERT INTO `nginx_files` (`name`, `enable`, `content`, `timestamp`, `is_deleted`) VALUES
('/conf.d/99-cloud-admin-upstreams.conf',	1,	'',	1612785502,	1),
('/conf.d/99-cloud-backend-upstreams.conf',	1,	'upstream 15672.cloud_os_rabbitmq.cloud_backend.example {\n	server 172.22.0.4:15672;\n}',	1612808008,	0),
('/conf.d/99-cloud-frontend-upstreams.conf',	1,	'upstream 80.dev_php.cloud_frontend.example {\n	server 172.21.0.6:80;\n	server 172.21.0.5:80;\n}',	1612808341,	0),
('/conf.d/99-load-balancer-upstreams.conf',	1,	'',	1612785506,	1),
('/domains/cloud_os.local.conf',	1,	'server {\n	listen 80;\n	server_name cloud_os.local;\n	root /usr/share/nginx/default;\n	index index.html;\n	autoindex off;\n	location / {\n		proxy_pass http://80.dev_php.cloud_frontend.example/;\n		include proxy_params;\n		proxy_set_header X-ROUTE-PREFIX \"/\";\n	}\n\n}',	1612785543,	0),
('/inc/services_admin_page.inc',	1,	'location ~* /admin/services/cloud_os_rabbitmq/api/(.*?)/(.*) {\n        proxy_pass http://15672.cloud_os_rabbitmq.cloud_backend.example/api/$1/%2F/$2?$query_string;\n        include proxy_params;\n}\nlocation /admin/services/cloud_os_rabbitmq/ {\n        proxy_pass http://15672.cloud_os_rabbitmq.cloud_backend.example/;\n        include proxy_params;\n}',	1612795624,	0);

DROP TABLE IF EXISTS `roles`;
CREATE TABLE `roles` (
  `role_id` bigint(20) NOT NULL AUTO_INCREMENT,
  `space_id` bigint(20) NOT NULL,
  `role_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  PRIMARY KEY (`role_id`),
  KEY `space_id` (`space_id`),
  CONSTRAINT `roles_ibfk_1` FOREIGN KEY (`space_id`) REFERENCES `spaces` (`space_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;


DROP TABLE IF EXISTS `routes`;
CREATE TABLE `routes` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `enable` tinyint(4) NOT NULL,
  `protocol` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `domain_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `route` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `docker_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `target_port` int(11) NOT NULL,
  `route_prefix` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `layer_uid` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  PRIMARY KEY (`id`),
  KEY `domain_name` (`domain_name`),
  CONSTRAINT `routes_ibfk_1` FOREIGN KEY (`domain_name`) REFERENCES `domains` (`domain_name`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

INSERT INTO `routes` (`id`, `enable`, `protocol`, `domain_name`, `route`, `docker_name`, `target_port`, `route_prefix`, `layer_uid`) VALUES
(1,	1,	'http',	'cloud_os.local',	'/',	'dev_php',	80,	'/',	'');

DROP TABLE IF EXISTS `services`;
CREATE TABLE `services` (
  `service_id` bigint(20) NOT NULL AUTO_INCREMENT,
  `stack_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `service_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `software_api_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `have_admin_page` tinyint(4) NOT NULL,
  `admin_port` int(11) NOT NULL,
  `admin_route` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `admin_custom_nginx` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `enable` tinyint(4) NOT NULL,
  `is_deleted` tinyint(4) NOT NULL,
  `data` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`data`)),
  `docker_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `docker_image` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `docker_content` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `docker_json` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`docker_json`)),
  `docker_tasks` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`docker_tasks`)),
  `docker_balancer` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`docker_balancer`)),
  `timestamp` bigint(20) NOT NULL,
  PRIMARY KEY (`service_id`),
  UNIQUE KEY `stack_name_service_name` (`stack_name`,`service_name`),
  UNIQUE KEY `docker_name` (`docker_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

INSERT INTO `services` (`service_id`, `stack_name`, `service_name`, `software_api_name`, `have_admin_page`, `admin_port`, `admin_route`, `admin_custom_nginx`, `enable`, `is_deleted`, `data`, `docker_name`, `docker_image`, `docker_content`, `docker_json`, `docker_tasks`, `docker_balancer`, `timestamp`) VALUES
(1,	'database',	'mysql_node1',	'',	0,	0,	'',	'',	1,	0,	NULL,	'database_mysql_node1',	'bayrell/alpine_mariadb:10.4@sha256:372782c9b79eae684b65e661b0e8c6b182661845a4f3959bb3d2caa72a02b673',	'',	'{\"ID\":\"1mre2fr7y9t7g9o50807toy8u\",\"Version\":{\"Index\":76},\"CreatedAt\":\"2021-02-08T18:09:55.675029251Z\",\"UpdatedAt\":\"2021-02-08T18:27:54.176865637Z\",\"Spec\":{\"Name\":\"database_mysql_node1\",\"Labels\":{\"com.docker.stack.image\":\"bayrell\\/alpine_mariadb:10.4\",\"com.docker.stack.namespace\":\"database\"},\"TaskTemplate\":{\"ContainerSpec\":{\"Image\":\"bayrell\\/alpine_mariadb:10.4@sha256:372782c9b79eae684b65e661b0e8c6b182661845a4f3959bb3d2caa72a02b673\",\"Labels\":{\"com.docker.stack.namespace\":\"database\"},\"Args\":[\"--character-set-server=utf8mb4\",\"--collation-server=utf8mb4_unicode_ci\",\"--sql-mode=\",\"--ft_min_word_len=1\",\"--wait_timeout=600\",\"--max_allowed_packet=1G\"],\"Hostname\":\"{{.Service.Name}}.{{.Task.ID}}.local\",\"Env\":[\"AMQP_HOST=cloud_os_rabbitmq\",\"AMQP_PORT=5672\",\"CLOUD_BUS_GATEWAY=cloud_os_gateway\",\"CLOUD_KEY=GXBMBGadMWNk5hBtHwT4tzDcSgZSJEMeAAd3arBeZsf7mIrcu1Zk0kjyICuCuJGURYUyW7K81qlneDad65u5pF4Ze5o1qT3sdeBVeLweCGcQFbbnjJ9aAzXJvifav37s\",\"DOCKER=1\",\"MYSQL_HOST=database_mysql_node1\",\"MYSQL_PASSWORD=BUPeC2ONqj7dl63V\",\"MYSQL_ROOT_PASSWORD=BUPeC2ONqj7dl63V\",\"MYSQL_ROOT_USERNAME=root\",\"MYSQL_USERNAME=root\",\"NODE_ID={{.Node.ID}}\",\"SERVICE_ID={{.Service.ID}}\",\"TASK_ID={{.Task.ID}}\"],\"Privileges\":{\"CredentialSpec\":null,\"SELinuxContext\":null},\"Mounts\":[{\"Type\":\"volume\",\"Source\":\"database_mysql_node1_data\",\"Target\":\"\\/data\",\"VolumeOptions\":{\"Labels\":{\"com.docker.stack.namespace\":\"database\"}}}],\"Isolation\":\"default\"},\"Resources\":[],\"RestartPolicy\":{\"Condition\":\"on-failure\",\"Delay\":10000000000,\"MaxAttempts\":0,\"Window\":120000000000},\"Placement\":{\"Constraints\":[\"node.labels.name == docker0\"],\"Platforms\":[{\"Architecture\":\"amd64\",\"OS\":\"linux\"},{\"OS\":\"linux\"}]},\"Networks\":[{\"Target\":\"p7n80hb6vsmkh837l8iteadcx\",\"Aliases\":[\"mysql_node1\"]}],\"LogDriver\":{\"Name\":\"journald\"},\"ForceUpdate\":0,\"Runtime\":\"container\"},\"Mode\":{\"Replicated\":{\"Replicas\":1}},\"UpdateConfig\":{\"Parallelism\":1,\"Delay\":5000000000,\"FailureAction\":\"rollback\",\"MaxFailureRatio\":0,\"Order\":\"stop-first\"},\"EndpointSpec\":{\"Mode\":\"dnsrr\"}},\"PreviousSpec\":{\"Name\":\"database_mysql_node1\",\"Labels\":{\"com.docker.stack.image\":\"bayrell\\/alpine_mariadb:10.4\",\"com.docker.stack.namespace\":\"database\"},\"TaskTemplate\":{\"ContainerSpec\":{\"Image\":\"bayrell\\/alpine_mariadb:10.4@sha256:372782c9b79eae684b65e661b0e8c6b182661845a4f3959bb3d2caa72a02b673\",\"Labels\":{\"com.docker.stack.namespace\":\"database\"},\"Args\":[\"--character-set-server=utf8mb4\",\"--collation-server=utf8mb4_unicode_ci\",\"--sql-mode=\",\"--ft_min_word_len=1\",\"--wait_timeout=600\",\"--max_allowed_packet=1G\"],\"Hostname\":\"{{.Service.Name}}.{{.Task.ID}}.local\",\"Env\":[\"AMQP_HOST=cloud_os_rabbitmq\",\"AMQP_PORT=5672\",\"CLOUD_BUS_GATEWAY=cloud_os_gateway\",\"CLOUD_KEY=GXBMBGadMWNk5hBtHwT4tzDcSgZSJEMeAAd3arBeZsf7mIrcu1Zk0kjyICuCuJGURYUyW7K81qlneDad65u5pF4Ze5o1qT3sdeBVeLweCGcQFbbnjJ9aAzXJvifav37s\",\"DOCKER=1\",\"MYSQL_HOST=database_mysql_node1\",\"MYSQL_PASSWORD=BUPeC2ONqj7dl63V\",\"MYSQL_ROOT_PASSWORD=BUPeC2ONqj7dl63V\",\"MYSQL_ROOT_USERNAME=root\",\"MYSQL_USERNAME=root\",\"NODE_ID={{.Node.ID}}\",\"SERVICE_ID={{.Service.ID}}\",\"TASK_ID={{.Task.ID}}\"],\"Privileges\":{\"CredentialSpec\":null,\"SELinuxContext\":null},\"Mounts\":[{\"Type\":\"volume\",\"Source\":\"database_mysql_node1_data\",\"Target\":\"\\/data\",\"VolumeOptions\":{\"Labels\":{\"com.docker.stack.namespace\":\"database\"}}}],\"Isolation\":\"default\"},\"Resources\":[],\"RestartPolicy\":{\"Condition\":\"on-failure\",\"Delay\":10000000000,\"MaxAttempts\":0,\"Window\":120000000000},\"Placement\":{\"Constraints\":[\"node.labels.name == docker0\"],\"Platforms\":[{\"Architecture\":\"amd64\",\"OS\":\"linux\"},{\"OS\":\"linux\"}]},\"Networks\":[{\"Target\":\"p7n80hb6vsmkh837l8iteadcx\",\"Aliases\":[\"mysql_node1\"]}],\"LogDriver\":{\"Name\":\"journald\"},\"ForceUpdate\":0,\"Runtime\":\"container\"},\"Mode\":{\"Replicated\":{\"Replicas\":1}},\"UpdateConfig\":{\"Parallelism\":1,\"Delay\":5000000000,\"FailureAction\":\"rollback\",\"MaxFailureRatio\":0,\"Order\":\"stop-first\"},\"EndpointSpec\":{\"Mode\":\"dnsrr\"}},\"Endpoint\":{\"Spec\":[]}}',	'[{\"ID\":\"8wpevosx6wgcgj6nv2cf7px5j\",\"Version\":{\"Index\":52},\"CreatedAt\":\"2021-02-08T18:09:55.694164235Z\",\"UpdatedAt\":\"2021-02-08T18:11:47.766583749Z\",\"Labels\":{},\"Spec\":{\"ContainerSpec\":{\"Image\":\"bayrell/alpine_mariadb:10.4@sha256:372782c9b79eae684b65e661b0e8c6b182661845a4f3959bb3d2caa72a02b673\",\"Labels\":{\"com.docker.stack.namespace\":\"database\"},\"Args\":[\"--character-set-server=utf8mb4\",\"--collation-server=utf8mb4_unicode_ci\",\"--sql-mode=\",\"--ft_min_word_len=1\",\"--wait_timeout=600\",\"--max_allowed_packet=1G\"],\"Hostname\":\"{{.Service.Name}}.{{.Task.ID}}.local\",\"Env\":[\"AMQP_HOST=cloud_os_rabbitmq\",\"AMQP_PORT=5672\",\"CLOUD_BUS_GATEWAY=cloud_os_gateway\",\"CLOUD_KEY=GXBMBGadMWNk5hBtHwT4tzDcSgZSJEMeAAd3arBeZsf7mIrcu1Zk0kjyICuCuJGURYUyW7K81qlneDad65u5pF4Ze5o1qT3sdeBVeLweCGcQFbbnjJ9aAzXJvifav37s\",\"DOCKER=1\",\"MYSQL_HOST=database_mysql_node1\",\"MYSQL_PASSWORD=BUPeC2ONqj7dl63V\",\"MYSQL_ROOT_PASSWORD=BUPeC2ONqj7dl63V\",\"MYSQL_ROOT_USERNAME=root\",\"MYSQL_USERNAME=root\",\"NODE_ID={{.Node.ID}}\",\"SERVICE_ID={{.Service.ID}}\",\"TASK_ID={{.Task.ID}}\"],\"Privileges\":{\"CredentialSpec\":null,\"SELinuxContext\":null},\"Mounts\":[{\"Type\":\"volume\",\"Source\":\"database_mysql_node1_data\",\"Target\":\"/data\",\"VolumeOptions\":{\"Labels\":{\"com.docker.stack.namespace\":\"database\"}}}],\"Isolation\":\"default\"},\"Resources\":{},\"RestartPolicy\":{\"Condition\":\"on-failure\",\"Delay\":10000000000,\"MaxAttempts\":0,\"Window\":120000000000},\"Placement\":{\"Constraints\":[\"node.labels.name == docker0\"],\"Platforms\":[{\"Architecture\":\"amd64\",\"OS\":\"linux\"},{\"OS\":\"linux\"}]},\"Networks\":[{\"Target\":\"p7n80hb6vsmkh837l8iteadcx\",\"Aliases\":[\"mysql_node1\"]}],\"LogDriver\":{\"Name\":\"journald\"},\"ForceUpdate\":0},\"ServiceID\":\"1mre2fr7y9t7g9o50807toy8u\",\"Slot\":1,\"NodeID\":\"jfx6fpd23tqvqur5ne7oha08r\",\"Status\":{\"Timestamp\":\"2021-02-08T18:11:47.666632574Z\",\"State\":\"running\",\"Message\":\"started\",\"ContainerStatus\":{\"ContainerID\":\"e7848607d8fff5ee8677a43a0568135f2a7512d92233f78dd76dbe252a75272f\",\"PID\":4423,\"ExitCode\":0},\"PortStatus\":{}},\"DesiredState\":\"running\",\"NetworksAttachments\":[{\"Network\":{\"ID\":\"p7n80hb6vsmkh837l8iteadcx\",\"Version\":{\"Index\":14},\"CreatedAt\":\"2021-02-08T18:09:50.261268673Z\",\"UpdatedAt\":\"2021-02-08T18:09:50.26966085Z\",\"Spec\":{\"Name\":\"cloud_backend\",\"Labels\":{},\"DriverConfiguration\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.bridge.name\":\"cloud_backend\"}},\"Attachable\":true,\"IPAMOptions\":{\"Driver\":{\"Name\":\"default\"},\"Configs\":[{\"Subnet\":\"172.22.0.1/16\",\"Gateway\":\"172.22.0.1\"}]},\"Scope\":\"swarm\"},\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.bridge.name\":\"cloud_backend\",\"com.docker.network.driver.overlay.vxlanid_list\":\"4098\"}},\"IPAMOptions\":{\"Driver\":{\"Name\":\"default\"},\"Configs\":[{\"Subnet\":\"172.22.0.1/16\",\"Gateway\":\"172.22.0.1\"}]}},\"Addresses\":[\"172.22.0.2/16\"]}]}]\n',	'{\"State\":{\"Work\":1,\"Total\":1},\"Tasks\":[{\"ID\":\"8wpevosx6wgcgj6nv2cf7px5j\",\"Status\":{\"Timestamp\":\"2021-02-08T18:11:47.666632574Z\",\"State\":\"running\",\"Message\":\"started\",\"ContainerStatus\":{\"ContainerID\":\"e7848607d8fff5ee8677a43a0568135f2a7512d92233f78dd76dbe252a75272f\",\"PID\":4423,\"ExitCode\":0},\"PortStatus\":[]},\"DesiredState\":\"running\",\"Slot\":1,\"Node\":{\"ID\":\"jfx6fpd23tqvqur5ne7oha08r\",\"Hostname\":\"www0\",\"Status\":{\"State\":\"ready\",\"Addr\":\"172.30.0.30\"}},\"Networks\":[{\"ID\":\"p7n80hb6vsmkh837l8iteadcx\",\"Name\":\"cloud_backend\",\"Addresses\":[\"172.22.0.2\\/16\"]}]}]}',	1612808941),
(2,	'cloud_os',	'standard',	'',	0,	0,	'',	'',	1,	0,	NULL,	'cloud_os_standard',	'bayrell/cloud_os_standard:0.3.0@sha256:bf2284bf152318416c0fa3ec126ab459982209b1461e874e86b70101bb8e8e1d',	'',	'{\"ID\":\"g1k9vol8fmex2415cmynq844a\",\"Version\":{\"Index\":80},\"CreatedAt\":\"2021-02-08T18:28:02.572562992Z\",\"UpdatedAt\":\"2021-02-08T18:28:02.599789461Z\",\"Spec\":{\"Name\":\"cloud_os_standard\",\"Labels\":{\"com.docker.stack.image\":\"bayrell\\/cloud_os_standard:0.3.0\",\"com.docker.stack.namespace\":\"cloud_os\"},\"TaskTemplate\":{\"ContainerSpec\":{\"Image\":\"bayrell\\/cloud_os_standard:0.3.0@sha256:bf2284bf152318416c0fa3ec126ab459982209b1461e874e86b70101bb8e8e1d\",\"Labels\":{\"com.docker.stack.namespace\":\"cloud_os\"},\"Hostname\":\"{{.Service.Name}}.{{.Task.ID}}.local\",\"Env\":[\"AMQP_HOST=cloud_os_rabbitmq\",\"AMQP_PORT=5672\",\"CLOUD_BUS_GATEWAY=cloud_os_gateway\",\"CLOUD_KEY=GXBMBGadMWNk5hBtHwT4tzDcSgZSJEMeAAd3arBeZsf7mIrcu1Zk0kjyICuCuJGURYUyW7K81qlneDad65u5pF4Ze5o1qT3sdeBVeLweCGcQFbbnjJ9aAzXJvifav37s\",\"DOCKER=1\",\"MYSQL_DB=cloud_os_standard\",\"MYSQL_HOST=database_mysql_node1\",\"MYSQL_PASSWORD=BUPeC2ONqj7dl63V\",\"MYSQL_ROOT_PASSWORD=BUPeC2ONqj7dl63V\",\"MYSQL_ROOT_USERNAME=root\",\"MYSQL_USERNAME=root\",\"NODE_ID={{.Node.ID}}\",\"SERVICE_ID={{.Service.ID}}\",\"TASK_ID={{.Task.ID}}\"],\"Privileges\":{\"CredentialSpec\":null,\"SELinuxContext\":null},\"Mounts\":[{\"Type\":\"volume\",\"Source\":\"cloud_os_standard_data\",\"Target\":\"\\/data\",\"VolumeOptions\":{\"Labels\":{\"com.docker.stack.namespace\":\"cloud_os\"}}},{\"Type\":\"bind\",\"Source\":\"\\/var\\/run\\/docker.sock\",\"Target\":\"\\/var\\/run\\/docker.sock\",\"ReadOnly\":true}],\"Isolation\":\"default\"},\"Resources\":[],\"RestartPolicy\":{\"Condition\":\"on-failure\",\"Delay\":10000000000,\"MaxAttempts\":0,\"Window\":120000000000},\"Placement\":{\"Constraints\":[\"node.labels.name == docker0\"],\"Platforms\":[{\"Architecture\":\"amd64\",\"OS\":\"linux\"},{\"OS\":\"linux\"}]},\"Networks\":[{\"Target\":\"p7n80hb6vsmkh837l8iteadcx\",\"Aliases\":[\"standard\"]}],\"LogDriver\":{\"Name\":\"journald\"},\"ForceUpdate\":0,\"Runtime\":\"container\"},\"Mode\":{\"Replicated\":{\"Replicas\":1}},\"UpdateConfig\":{\"Parallelism\":1,\"Delay\":5000000000,\"FailureAction\":\"rollback\",\"MaxFailureRatio\":0,\"Order\":\"stop-first\"},\"EndpointSpec\":{\"Mode\":\"dnsrr\",\"Ports\":[{\"Protocol\":\"tcp\",\"TargetPort\":22,\"PublishedPort\":8022,\"PublishMode\":\"host\"},{\"Protocol\":\"tcp\",\"TargetPort\":80,\"PublishedPort\":8080,\"PublishMode\":\"host\"}]}},\"Endpoint\":{\"Spec\":{\"Mode\":\"dnsrr\",\"Ports\":[{\"Protocol\":\"tcp\",\"TargetPort\":22,\"PublishedPort\":8022,\"PublishMode\":\"host\"},{\"Protocol\":\"tcp\",\"TargetPort\":80,\"PublishedPort\":8080,\"PublishMode\":\"host\"}]},\"Ports\":[{\"Protocol\":\"tcp\",\"TargetPort\":22,\"PublishedPort\":8022,\"PublishMode\":\"host\"},{\"Protocol\":\"tcp\",\"TargetPort\":80,\"PublishedPort\":8080,\"PublishMode\":\"host\"}]}}',	'[{\"ID\":\"osyyx5z4syoxqgwmwu6i80bnb\",\"Version\":{\"Index\":87},\"CreatedAt\":\"2021-02-08T18:28:02.5888659Z\",\"UpdatedAt\":\"2021-02-08T18:28:06.151865328Z\",\"Labels\":{},\"Spec\":{\"ContainerSpec\":{\"Image\":\"bayrell/cloud_os_standard:0.3.0@sha256:bf2284bf152318416c0fa3ec126ab459982209b1461e874e86b70101bb8e8e1d\",\"Labels\":{\"com.docker.stack.namespace\":\"cloud_os\"},\"Hostname\":\"{{.Service.Name}}.{{.Task.ID}}.local\",\"Env\":[\"AMQP_HOST=cloud_os_rabbitmq\",\"AMQP_PORT=5672\",\"CLOUD_BUS_GATEWAY=cloud_os_gateway\",\"CLOUD_KEY=GXBMBGadMWNk5hBtHwT4tzDcSgZSJEMeAAd3arBeZsf7mIrcu1Zk0kjyICuCuJGURYUyW7K81qlneDad65u5pF4Ze5o1qT3sdeBVeLweCGcQFbbnjJ9aAzXJvifav37s\",\"DOCKER=1\",\"MYSQL_DB=cloud_os_standard\",\"MYSQL_HOST=database_mysql_node1\",\"MYSQL_PASSWORD=BUPeC2ONqj7dl63V\",\"MYSQL_ROOT_PASSWORD=BUPeC2ONqj7dl63V\",\"MYSQL_ROOT_USERNAME=root\",\"MYSQL_USERNAME=root\",\"NODE_ID={{.Node.ID}}\",\"SERVICE_ID={{.Service.ID}}\",\"TASK_ID={{.Task.ID}}\"],\"Privileges\":{\"CredentialSpec\":null,\"SELinuxContext\":null},\"Mounts\":[{\"Type\":\"volume\",\"Source\":\"cloud_os_standard_data\",\"Target\":\"/data\",\"VolumeOptions\":{\"Labels\":{\"com.docker.stack.namespace\":\"cloud_os\"}}},{\"Type\":\"bind\",\"Source\":\"/var/run/docker.sock\",\"Target\":\"/var/run/docker.sock\",\"ReadOnly\":true}],\"Isolation\":\"default\"},\"Resources\":{},\"RestartPolicy\":{\"Condition\":\"on-failure\",\"Delay\":10000000000,\"MaxAttempts\":0,\"Window\":120000000000},\"Placement\":{\"Constraints\":[\"node.labels.name == docker0\"],\"Platforms\":[{\"Architecture\":\"amd64\",\"OS\":\"linux\"},{\"OS\":\"linux\"}]},\"Networks\":[{\"Target\":\"p7n80hb6vsmkh837l8iteadcx\",\"Aliases\":[\"standard\"]}],\"LogDriver\":{\"Name\":\"journald\"},\"ForceUpdate\":0},\"ServiceID\":\"g1k9vol8fmex2415cmynq844a\",\"Slot\":1,\"NodeID\":\"jfx6fpd23tqvqur5ne7oha08r\",\"Status\":{\"Timestamp\":\"2021-02-08T18:28:06.145854875Z\",\"State\":\"running\",\"Message\":\"started\",\"ContainerStatus\":{\"ContainerID\":\"03270ed2df142fd8953ac20f4fbede0d13c347477d3688d3d5d974eb577774ef\",\"PID\":8239,\"ExitCode\":0},\"PortStatus\":{\"Ports\":[{\"Protocol\":\"tcp\",\"TargetPort\":22,\"PublishedPort\":8022,\"PublishMode\":\"host\"},{\"Protocol\":\"tcp\",\"TargetPort\":80,\"PublishedPort\":8080,\"PublishMode\":\"host\"}]}},\"DesiredState\":\"running\",\"NetworksAttachments\":[{\"Network\":{\"ID\":\"p7n80hb6vsmkh837l8iteadcx\",\"Version\":{\"Index\":14},\"CreatedAt\":\"2021-02-08T18:09:50.261268673Z\",\"UpdatedAt\":\"2021-02-08T18:09:50.26966085Z\",\"Spec\":{\"Name\":\"cloud_backend\",\"Labels\":{},\"DriverConfiguration\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.bridge.name\":\"cloud_backend\"}},\"Attachable\":true,\"IPAMOptions\":{\"Driver\":{\"Name\":\"default\"},\"Configs\":[{\"Subnet\":\"172.22.0.1/16\",\"Gateway\":\"172.22.0.1\"}]},\"Scope\":\"swarm\"},\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.bridge.name\":\"cloud_backend\",\"com.docker.network.driver.overlay.vxlanid_list\":\"4098\"}},\"IPAMOptions\":{\"Driver\":{\"Name\":\"default\"},\"Configs\":[{\"Subnet\":\"172.22.0.1/16\",\"Gateway\":\"172.22.0.1\"}]}},\"Addresses\":[\"172.22.0.7/16\"]}]}]\n',	'{\"State\":{\"Work\":1,\"Total\":1},\"Tasks\":[{\"ID\":\"osyyx5z4syoxqgwmwu6i80bnb\",\"Status\":{\"Timestamp\":\"2021-02-08T18:28:06.145854875Z\",\"State\":\"running\",\"Message\":\"started\",\"ContainerStatus\":{\"ContainerID\":\"03270ed2df142fd8953ac20f4fbede0d13c347477d3688d3d5d974eb577774ef\",\"PID\":8239,\"ExitCode\":0},\"PortStatus\":{\"Ports\":[{\"Protocol\":\"tcp\",\"TargetPort\":22,\"PublishedPort\":8022,\"PublishMode\":\"host\"},{\"Protocol\":\"tcp\",\"TargetPort\":80,\"PublishedPort\":8080,\"PublishMode\":\"host\"}]}},\"DesiredState\":\"running\",\"Slot\":1,\"Node\":{\"ID\":\"jfx6fpd23tqvqur5ne7oha08r\",\"Hostname\":\"www0\",\"Status\":{\"State\":\"ready\",\"Addr\":\"172.30.0.30\"}},\"Networks\":[{\"ID\":\"p7n80hb6vsmkh837l8iteadcx\",\"Name\":\"cloud_backend\",\"Addresses\":[\"172.22.0.7\\/16\"]}]}]}',	1612808941),
(3,	'dev',	'php',	'',	0,	0,	'',	'',	1,	0,	NULL,	'dev_php',	'bayrell/alpine_php_fpm:7.3-3@sha256:080b8d133b3d29fea616d119690c253e0b5d489491b687cca5a27dc1b3ca7523',	'',	'{\"ID\":\"tqcgj5mfrnt9odcvgo9vit9bk\",\"Version\":{\"Index\":57},\"CreatedAt\":\"2021-02-08T18:18:21.191367446Z\",\"UpdatedAt\":\"2021-02-08T18:18:21.191367446Z\",\"Spec\":{\"Name\":\"dev_php\",\"Labels\":{\"com.docker.stack.image\":\"bayrell\\/alpine_php_fpm:7.3-3\",\"com.docker.stack.namespace\":\"dev\"},\"TaskTemplate\":{\"ContainerSpec\":{\"Image\":\"bayrell\\/alpine_php_fpm:7.3-3@sha256:080b8d133b3d29fea616d119690c253e0b5d489491b687cca5a27dc1b3ca7523\",\"Labels\":{\"com.docker.stack.namespace\":\"dev\"},\"Hostname\":\"{{.Service.Name}}.{{.Task.ID}}.local\",\"Privileges\":{\"CredentialSpec\":null,\"SELinuxContext\":null},\"Mounts\":[{\"Type\":\"volume\",\"Source\":\"dev_php_data\",\"Target\":\"\\/data\",\"VolumeOptions\":{\"Labels\":{\"com.docker.stack.namespace\":\"dev\"}}}],\"Isolation\":\"default\"},\"Resources\":[],\"RestartPolicy\":{\"Condition\":\"on-failure\",\"Delay\":10000000000,\"MaxAttempts\":0,\"Window\":120000000000},\"Placement\":{\"Constraints\":[\"node.labels.name == docker0\"],\"Platforms\":[{\"Architecture\":\"amd64\",\"OS\":\"linux\"},{\"OS\":\"linux\"}]},\"Networks\":[{\"Target\":\"q86b9xwe8328xuxggsn61yufv\",\"Aliases\":[\"php\"]}],\"LogDriver\":{\"Name\":\"journald\"},\"ForceUpdate\":0,\"Runtime\":\"container\"},\"Mode\":{\"Replicated\":{\"Replicas\":2}},\"UpdateConfig\":{\"Parallelism\":1,\"Delay\":5000000000,\"FailureAction\":\"rollback\",\"MaxFailureRatio\":0,\"Order\":\"stop-first\"},\"EndpointSpec\":{\"Mode\":\"dnsrr\"}},\"Endpoint\":{\"Spec\":[]}}',	'[{\"ID\":\"m8m8qs35fwxa55qh9vbx90wm8\",\"Version\":{\"Index\":69},\"CreatedAt\":\"2021-02-08T18:18:21.230204115Z\",\"UpdatedAt\":\"2021-02-08T18:19:00.065831998Z\",\"Labels\":{},\"Spec\":{\"ContainerSpec\":{\"Image\":\"bayrell/alpine_php_fpm:7.3-3@sha256:080b8d133b3d29fea616d119690c253e0b5d489491b687cca5a27dc1b3ca7523\",\"Labels\":{\"com.docker.stack.namespace\":\"dev\"},\"Hostname\":\"{{.Service.Name}}.{{.Task.ID}}.local\",\"Privileges\":{\"CredentialSpec\":null,\"SELinuxContext\":null},\"Mounts\":[{\"Type\":\"volume\",\"Source\":\"dev_php_data\",\"Target\":\"/data\",\"VolumeOptions\":{\"Labels\":{\"com.docker.stack.namespace\":\"dev\"}}}],\"Isolation\":\"default\"},\"Resources\":{},\"RestartPolicy\":{\"Condition\":\"on-failure\",\"Delay\":10000000000,\"MaxAttempts\":0,\"Window\":120000000000},\"Placement\":{\"Constraints\":[\"node.labels.name == docker0\"],\"Platforms\":[{\"Architecture\":\"amd64\",\"OS\":\"linux\"},{\"OS\":\"linux\"}]},\"Networks\":[{\"Target\":\"q86b9xwe8328xuxggsn61yufv\",\"Aliases\":[\"php\"]}],\"LogDriver\":{\"Name\":\"journald\"},\"ForceUpdate\":0},\"ServiceID\":\"tqcgj5mfrnt9odcvgo9vit9bk\",\"Slot\":2,\"NodeID\":\"jfx6fpd23tqvqur5ne7oha08r\",\"Status\":{\"Timestamp\":\"2021-02-08T18:19:00.008553298Z\",\"State\":\"running\",\"Message\":\"started\",\"ContainerStatus\":{\"ContainerID\":\"c3785f40c3973a7eef8985830a4a668c373fdd2225c8336fadf67a8be9e39797\",\"PID\":6731,\"ExitCode\":0},\"PortStatus\":{}},\"DesiredState\":\"running\",\"NetworksAttachments\":[{\"Network\":{\"ID\":\"q86b9xwe8328xuxggsn61yufv\",\"Version\":{\"Index\":12},\"CreatedAt\":\"2021-02-08T18:09:50.171587926Z\",\"UpdatedAt\":\"2021-02-08T18:09:50.214614804Z\",\"Spec\":{\"Name\":\"cloud_frontend\",\"Labels\":{},\"DriverConfiguration\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.bridge.name\":\"cloud_frontend\"}},\"Attachable\":true,\"IPAMOptions\":{\"Driver\":{\"Name\":\"default\"},\"Configs\":[{\"Subnet\":\"172.21.0.1/16\",\"Gateway\":\"172.21.0.1\"}]},\"Scope\":\"swarm\"},\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.bridge.name\":\"cloud_frontend\",\"com.docker.network.driver.overlay.vxlanid_list\":\"4097\"}},\"IPAMOptions\":{\"Driver\":{\"Name\":\"default\"},\"Configs\":[{\"Subnet\":\"172.21.0.1/16\",\"Gateway\":\"172.21.0.1\"}]}},\"Addresses\":[\"172.21.0.6/16\"]}]},{\"ID\":\"wtqws9vi52fm4cjntytajueuo\",\"Version\":{\"Index\":68},\"CreatedAt\":\"2021-02-08T18:18:21.229922224Z\",\"UpdatedAt\":\"2021-02-08T18:18:59.901422824Z\",\"Labels\":{},\"Spec\":{\"ContainerSpec\":{\"Image\":\"bayrell/alpine_php_fpm:7.3-3@sha256:080b8d133b3d29fea616d119690c253e0b5d489491b687cca5a27dc1b3ca7523\",\"Labels\":{\"com.docker.stack.namespace\":\"dev\"},\"Hostname\":\"{{.Service.Name}}.{{.Task.ID}}.local\",\"Privileges\":{\"CredentialSpec\":null,\"SELinuxContext\":null},\"Mounts\":[{\"Type\":\"volume\",\"Source\":\"dev_php_data\",\"Target\":\"/data\",\"VolumeOptions\":{\"Labels\":{\"com.docker.stack.namespace\":\"dev\"}}}],\"Isolation\":\"default\"},\"Resources\":{},\"RestartPolicy\":{\"Condition\":\"on-failure\",\"Delay\":10000000000,\"MaxAttempts\":0,\"Window\":120000000000},\"Placement\":{\"Constraints\":[\"node.labels.name == docker0\"],\"Platforms\":[{\"Architecture\":\"amd64\",\"OS\":\"linux\"},{\"OS\":\"linux\"}]},\"Networks\":[{\"Target\":\"q86b9xwe8328xuxggsn61yufv\",\"Aliases\":[\"php\"]}],\"LogDriver\":{\"Name\":\"journald\"},\"ForceUpdate\":0},\"ServiceID\":\"tqcgj5mfrnt9odcvgo9vit9bk\",\"Slot\":1,\"NodeID\":\"jfx6fpd23tqvqur5ne7oha08r\",\"Status\":{\"Timestamp\":\"2021-02-08T18:18:59.840347144Z\",\"State\":\"running\",\"Message\":\"started\",\"ContainerStatus\":{\"ContainerID\":\"8a3bf2ba401ebb511a7ca247ef5c73e97c156f035d5281fdf9c3dd0aa5fce37f\",\"PID\":6690,\"ExitCode\":0},\"PortStatus\":{}},\"DesiredState\":\"running\",\"NetworksAttachments\":[{\"Network\":{\"ID\":\"q86b9xwe8328xuxggsn61yufv\",\"Version\":{\"Index\":12},\"CreatedAt\":\"2021-02-08T18:09:50.171587926Z\",\"UpdatedAt\":\"2021-02-08T18:09:50.214614804Z\",\"Spec\":{\"Name\":\"cloud_frontend\",\"Labels\":{},\"DriverConfiguration\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.bridge.name\":\"cloud_frontend\"}},\"Attachable\":true,\"IPAMOptions\":{\"Driver\":{\"Name\":\"default\"},\"Configs\":[{\"Subnet\":\"172.21.0.1/16\",\"Gateway\":\"172.21.0.1\"}]},\"Scope\":\"swarm\"},\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.bridge.name\":\"cloud_frontend\",\"com.docker.network.driver.overlay.vxlanid_list\":\"4097\"}},\"IPAMOptions\":{\"Driver\":{\"Name\":\"default\"},\"Configs\":[{\"Subnet\":\"172.21.0.1/16\",\"Gateway\":\"172.21.0.1\"}]}},\"Addresses\":[\"172.21.0.5/16\"]}]}]\n',	'{\"State\":{\"Work\":2,\"Total\":2},\"Tasks\":[{\"ID\":\"m8m8qs35fwxa55qh9vbx90wm8\",\"Status\":{\"Timestamp\":\"2021-02-08T18:19:00.008553298Z\",\"State\":\"running\",\"Message\":\"started\",\"ContainerStatus\":{\"ContainerID\":\"c3785f40c3973a7eef8985830a4a668c373fdd2225c8336fadf67a8be9e39797\",\"PID\":6731,\"ExitCode\":0},\"PortStatus\":[]},\"DesiredState\":\"running\",\"Slot\":2,\"Node\":{\"ID\":\"jfx6fpd23tqvqur5ne7oha08r\",\"Hostname\":\"www0\",\"Status\":{\"State\":\"ready\",\"Addr\":\"172.30.0.30\"}},\"Networks\":[{\"ID\":\"q86b9xwe8328xuxggsn61yufv\",\"Name\":\"cloud_frontend\",\"Addresses\":[\"172.21.0.6\\/16\"]}]},{\"ID\":\"wtqws9vi52fm4cjntytajueuo\",\"Status\":{\"Timestamp\":\"2021-02-08T18:18:59.840347144Z\",\"State\":\"running\",\"Message\":\"started\",\"ContainerStatus\":{\"ContainerID\":\"8a3bf2ba401ebb511a7ca247ef5c73e97c156f035d5281fdf9c3dd0aa5fce37f\",\"PID\":6690,\"ExitCode\":0},\"PortStatus\":[]},\"DesiredState\":\"running\",\"Slot\":1,\"Node\":{\"ID\":\"jfx6fpd23tqvqur5ne7oha08r\",\"Hostname\":\"www0\",\"Status\":{\"State\":\"ready\",\"Addr\":\"172.30.0.30\"}},\"Networks\":[{\"ID\":\"q86b9xwe8328xuxggsn61yufv\",\"Name\":\"cloud_frontend\",\"Addresses\":[\"172.21.0.5\\/16\"]}]}]}',	1612808941),
(4,	'cloud_os',	'rabbitmq',	'',	1,	15672,	'/',	'location ~* /admin/services/cloud_os_rabbitmq/api/(.*?)/(.*) {\n        proxy_pass http://15672.cloud_os_rabbitmq.cloud_backend.example/api/$1/%2F/$2?$query_string;\n        include proxy_params;\n}\nlocation /admin/services/cloud_os_rabbitmq/ {\n        proxy_pass http://15672.cloud_os_rabbitmq.cloud_backend.example/;\n        include proxy_params;\n}',	1,	0,	NULL,	'cloud_os_rabbitmq',	'rabbitmq:3.8.9-management@sha256:4ed4f6471c52b1e79250cf019e8c49bb1548021df85b203fbbb637caf44bfddc',	'',	'{\"ID\":\"umltx82wh0dy7firwvnsbj89b\",\"Version\":{\"Index\":89},\"CreatedAt\":\"2021-02-08T18:10:02.260180143Z\",\"UpdatedAt\":\"2021-02-08T18:28:10.543803326Z\",\"Spec\":{\"Name\":\"cloud_os_rabbitmq\",\"Labels\":{\"com.docker.stack.image\":\"rabbitmq:3.8.9-management\",\"com.docker.stack.namespace\":\"cloud_os\"},\"TaskTemplate\":{\"ContainerSpec\":{\"Image\":\"rabbitmq:3.8.9-management@sha256:4ed4f6471c52b1e79250cf019e8c49bb1548021df85b203fbbb637caf44bfddc\",\"Labels\":{\"com.docker.stack.namespace\":\"cloud_os\"},\"Hostname\":\"{{.Service.Name}}.{{.Task.ID}}.local\",\"Privileges\":{\"CredentialSpec\":null,\"SELinuxContext\":null},\"Mounts\":[{\"Type\":\"volume\",\"Source\":\"cloud_os_rabbitmq_data\",\"Target\":\"\\/var\\/lib\\/rabbitmq\",\"VolumeOptions\":{\"Labels\":{\"com.docker.stack.namespace\":\"cloud_os\"}}}],\"Isolation\":\"default\"},\"Resources\":[],\"RestartPolicy\":{\"Condition\":\"on-failure\",\"Delay\":10000000000,\"MaxAttempts\":0,\"Window\":120000000000},\"Placement\":{\"Constraints\":[\"node.labels.name == docker0\"],\"Platforms\":[{\"Architecture\":\"amd64\",\"OS\":\"linux\"},{\"OS\":\"linux\"},{\"Architecture\":\"arm64\",\"OS\":\"linux\"},{\"Architecture\":\"386\",\"OS\":\"linux\"},{\"Architecture\":\"s390x\",\"OS\":\"linux\"}]},\"Networks\":[{\"Target\":\"p7n80hb6vsmkh837l8iteadcx\",\"Aliases\":[\"rabbitmq\"]}],\"LogDriver\":{\"Name\":\"journald\"},\"ForceUpdate\":0,\"Runtime\":\"container\"},\"Mode\":{\"Replicated\":{\"Replicas\":1}},\"UpdateConfig\":{\"Parallelism\":1,\"Delay\":5000000000,\"FailureAction\":\"rollback\",\"MaxFailureRatio\":0,\"Order\":\"stop-first\"},\"EndpointSpec\":{\"Mode\":\"dnsrr\"}},\"PreviousSpec\":{\"Name\":\"cloud_os_rabbitmq\",\"Labels\":{\"com.docker.stack.image\":\"rabbitmq:3.8.9-management\",\"com.docker.stack.namespace\":\"cloud_os\"},\"TaskTemplate\":{\"ContainerSpec\":{\"Image\":\"rabbitmq:3.8.9-management@sha256:4ed4f6471c52b1e79250cf019e8c49bb1548021df85b203fbbb637caf44bfddc\",\"Labels\":{\"com.docker.stack.namespace\":\"cloud_os\"},\"Hostname\":\"{{.Service.Name}}.{{.Task.ID}}.local\",\"Privileges\":{\"CredentialSpec\":null,\"SELinuxContext\":null},\"Mounts\":[{\"Type\":\"volume\",\"Source\":\"cloud_os_rabbitmq_data\",\"Target\":\"\\/var\\/lib\\/rabbitmq\",\"VolumeOptions\":{\"Labels\":{\"com.docker.stack.namespace\":\"cloud_os\"}}}],\"Isolation\":\"default\"},\"Resources\":[],\"RestartPolicy\":{\"Condition\":\"on-failure\",\"Delay\":10000000000,\"MaxAttempts\":0,\"Window\":120000000000},\"Placement\":{\"Constraints\":[\"node.labels.name == docker0\"],\"Platforms\":[{\"Architecture\":\"amd64\",\"OS\":\"linux\"},{\"OS\":\"linux\"},{\"Architecture\":\"arm64\",\"OS\":\"linux\"},{\"Architecture\":\"386\",\"OS\":\"linux\"},{\"Architecture\":\"s390x\",\"OS\":\"linux\"}]},\"Networks\":[{\"Target\":\"p7n80hb6vsmkh837l8iteadcx\",\"Aliases\":[\"rabbitmq\"]}],\"LogDriver\":{\"Name\":\"journald\"},\"ForceUpdate\":0,\"Runtime\":\"container\"},\"Mode\":{\"Replicated\":{\"Replicas\":1}},\"UpdateConfig\":{\"Parallelism\":1,\"Delay\":5000000000,\"FailureAction\":\"rollback\",\"MaxFailureRatio\":0,\"Order\":\"stop-first\"},\"EndpointSpec\":{\"Mode\":\"dnsrr\"}},\"Endpoint\":{\"Spec\":[]}}',	'[{\"ID\":\"gnezotmnfgvod4fgsj89l6u46\",\"Version\":{\"Index\":51},\"CreatedAt\":\"2021-02-08T18:10:02.302771317Z\",\"UpdatedAt\":\"2021-02-08T18:11:47.354101172Z\",\"Labels\":{},\"Spec\":{\"ContainerSpec\":{\"Image\":\"rabbitmq:3.8.9-management@sha256:4ed4f6471c52b1e79250cf019e8c49bb1548021df85b203fbbb637caf44bfddc\",\"Labels\":{\"com.docker.stack.namespace\":\"cloud_os\"},\"Hostname\":\"{{.Service.Name}}.{{.Task.ID}}.local\",\"Privileges\":{\"CredentialSpec\":null,\"SELinuxContext\":null},\"Mounts\":[{\"Type\":\"volume\",\"Source\":\"cloud_os_rabbitmq_data\",\"Target\":\"/var/lib/rabbitmq\",\"VolumeOptions\":{\"Labels\":{\"com.docker.stack.namespace\":\"cloud_os\"}}}],\"Isolation\":\"default\"},\"Resources\":{},\"RestartPolicy\":{\"Condition\":\"on-failure\",\"Delay\":10000000000,\"MaxAttempts\":0,\"Window\":120000000000},\"Placement\":{\"Constraints\":[\"node.labels.name == docker0\"],\"Platforms\":[{\"Architecture\":\"amd64\",\"OS\":\"linux\"},{\"OS\":\"linux\"},{\"Architecture\":\"arm64\",\"OS\":\"linux\"},{\"Architecture\":\"386\",\"OS\":\"linux\"},{\"Architecture\":\"s390x\",\"OS\":\"linux\"}]},\"Networks\":[{\"Target\":\"p7n80hb6vsmkh837l8iteadcx\",\"Aliases\":[\"rabbitmq\"]}],\"LogDriver\":{\"Name\":\"journald\"},\"ForceUpdate\":0},\"ServiceID\":\"umltx82wh0dy7firwvnsbj89b\",\"Slot\":1,\"NodeID\":\"jfx6fpd23tqvqur5ne7oha08r\",\"Status\":{\"Timestamp\":\"2021-02-08T18:11:47.287920911Z\",\"State\":\"running\",\"Message\":\"started\",\"ContainerStatus\":{\"ContainerID\":\"fc06d4158d2fb1237eedd1b14a7ee67070e63f9cfbe7f4f41acb8830e22d6cda\",\"PID\":4376,\"ExitCode\":0},\"PortStatus\":{}},\"DesiredState\":\"running\",\"NetworksAttachments\":[{\"Network\":{\"ID\":\"p7n80hb6vsmkh837l8iteadcx\",\"Version\":{\"Index\":14},\"CreatedAt\":\"2021-02-08T18:09:50.261268673Z\",\"UpdatedAt\":\"2021-02-08T18:09:50.26966085Z\",\"Spec\":{\"Name\":\"cloud_backend\",\"Labels\":{},\"DriverConfiguration\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.bridge.name\":\"cloud_backend\"}},\"Attachable\":true,\"IPAMOptions\":{\"Driver\":{\"Name\":\"default\"},\"Configs\":[{\"Subnet\":\"172.22.0.1/16\",\"Gateway\":\"172.22.0.1\"}]},\"Scope\":\"swarm\"},\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.bridge.name\":\"cloud_backend\",\"com.docker.network.driver.overlay.vxlanid_list\":\"4098\"}},\"IPAMOptions\":{\"Driver\":{\"Name\":\"default\"},\"Configs\":[{\"Subnet\":\"172.22.0.1/16\",\"Gateway\":\"172.22.0.1\"}]}},\"Addresses\":[\"172.22.0.4/16\"]}]}]\n',	'{\"State\":{\"Work\":1,\"Total\":1},\"Tasks\":[{\"ID\":\"gnezotmnfgvod4fgsj89l6u46\",\"Status\":{\"Timestamp\":\"2021-02-08T18:11:47.287920911Z\",\"State\":\"running\",\"Message\":\"started\",\"ContainerStatus\":{\"ContainerID\":\"fc06d4158d2fb1237eedd1b14a7ee67070e63f9cfbe7f4f41acb8830e22d6cda\",\"PID\":4376,\"ExitCode\":0},\"PortStatus\":[]},\"DesiredState\":\"running\",\"Slot\":1,\"Node\":{\"ID\":\"jfx6fpd23tqvqur5ne7oha08r\",\"Hostname\":\"www0\",\"Status\":{\"State\":\"ready\",\"Addr\":\"172.30.0.30\"}},\"Networks\":[{\"ID\":\"p7n80hb6vsmkh837l8iteadcx\",\"Name\":\"cloud_backend\",\"Addresses\":[\"172.22.0.4\\/16\"]}]}]}',	1612808941),
(5,	'cloud_os',	'gateway',	'',	0,	0,	'',	'',	1,	0,	NULL,	'cloud_os_gateway',	'bayrell/bus_gateway:0.3.0@sha256:b328587f868ac8063f9641df6f1c1ff8193c206ea1bfb35b846fc4a60ab6e93f',	'',	'{\"ID\":\"kb2tuo88k1zx8wkpemykac7s4\",\"Version\":{\"Index\":88},\"CreatedAt\":\"2021-02-08T18:09:59.034386697Z\",\"UpdatedAt\":\"2021-02-08T18:28:06.927809395Z\",\"Spec\":{\"Name\":\"cloud_os_gateway\",\"Labels\":{\"com.docker.stack.image\":\"bayrell\\/bus_gateway:0.3.0\",\"com.docker.stack.namespace\":\"cloud_os\"},\"TaskTemplate\":{\"ContainerSpec\":{\"Image\":\"bayrell\\/bus_gateway:0.3.0@sha256:b328587f868ac8063f9641df6f1c1ff8193c206ea1bfb35b846fc4a60ab6e93f\",\"Labels\":{\"com.docker.stack.namespace\":\"cloud_os\"},\"Hostname\":\"{{.Service.Name}}.{{.Task.ID}}.local\",\"Env\":[\"AMQP_HOST=cloud_os_rabbitmq\",\"AMQP_PORT=5672\",\"CLOUD_BUS_GATEWAY=cloud_os_gateway\",\"CLOUD_KEY=GXBMBGadMWNk5hBtHwT4tzDcSgZSJEMeAAd3arBeZsf7mIrcu1Zk0kjyICuCuJGURYUyW7K81qlneDad65u5pF4Ze5o1qT3sdeBVeLweCGcQFbbnjJ9aAzXJvifav37s\",\"DOCKER=1\",\"MYSQL_HOST=database_mysql_node1\",\"MYSQL_PASSWORD=BUPeC2ONqj7dl63V\",\"MYSQL_ROOT_PASSWORD=BUPeC2ONqj7dl63V\",\"MYSQL_ROOT_USERNAME=root\",\"MYSQL_USERNAME=root\",\"NODE_ID={{.Node.ID}}\",\"SERVICE_ID={{.Service.ID}}\",\"TASK_ID={{.Task.ID}}\"],\"Privileges\":{\"CredentialSpec\":null,\"SELinuxContext\":null},\"Isolation\":\"default\"},\"Resources\":[],\"RestartPolicy\":{\"Condition\":\"on-failure\",\"Delay\":10000000000,\"MaxAttempts\":0,\"Window\":120000000000},\"Placement\":{\"Constraints\":[\"node.labels.name == docker0\"],\"Platforms\":[{\"Architecture\":\"amd64\",\"OS\":\"linux\"},{\"OS\":\"linux\"}]},\"Networks\":[{\"Target\":\"p7n80hb6vsmkh837l8iteadcx\",\"Aliases\":[\"gateway\"]},{\"Target\":\"q86b9xwe8328xuxggsn61yufv\",\"Aliases\":[\"gateway\"]}],\"LogDriver\":{\"Name\":\"journald\"},\"ForceUpdate\":0,\"Runtime\":\"container\"},\"Mode\":{\"Replicated\":{\"Replicas\":1}},\"UpdateConfig\":{\"Parallelism\":1,\"Delay\":5000000000,\"FailureAction\":\"rollback\",\"MaxFailureRatio\":0,\"Order\":\"stop-first\"},\"EndpointSpec\":{\"Mode\":\"dnsrr\"}},\"PreviousSpec\":{\"Name\":\"cloud_os_gateway\",\"Labels\":{\"com.docker.stack.image\":\"bayrell\\/bus_gateway:0.3.0\",\"com.docker.stack.namespace\":\"cloud_os\"},\"TaskTemplate\":{\"ContainerSpec\":{\"Image\":\"bayrell\\/bus_gateway:0.3.0@sha256:b328587f868ac8063f9641df6f1c1ff8193c206ea1bfb35b846fc4a60ab6e93f\",\"Labels\":{\"com.docker.stack.namespace\":\"cloud_os\"},\"Hostname\":\"{{.Service.Name}}.{{.Task.ID}}.local\",\"Env\":[\"AMQP_HOST=cloud_os_rabbitmq\",\"AMQP_PORT=5672\",\"CLOUD_BUS_GATEWAY=cloud_os_gateway\",\"CLOUD_KEY=GXBMBGadMWNk5hBtHwT4tzDcSgZSJEMeAAd3arBeZsf7mIrcu1Zk0kjyICuCuJGURYUyW7K81qlneDad65u5pF4Ze5o1qT3sdeBVeLweCGcQFbbnjJ9aAzXJvifav37s\",\"DOCKER=1\",\"MYSQL_HOST=database_mysql_node1\",\"MYSQL_PASSWORD=BUPeC2ONqj7dl63V\",\"MYSQL_ROOT_PASSWORD=BUPeC2ONqj7dl63V\",\"MYSQL_ROOT_USERNAME=root\",\"MYSQL_USERNAME=root\",\"NODE_ID={{.Node.ID}}\",\"SERVICE_ID={{.Service.ID}}\",\"TASK_ID={{.Task.ID}}\"],\"Privileges\":{\"CredentialSpec\":null,\"SELinuxContext\":null},\"Isolation\":\"default\"},\"Resources\":[],\"RestartPolicy\":{\"Condition\":\"on-failure\",\"Delay\":10000000000,\"MaxAttempts\":0,\"Window\":120000000000},\"Placement\":{\"Constraints\":[\"node.labels.name == docker0\"],\"Platforms\":[{\"Architecture\":\"amd64\",\"OS\":\"linux\"},{\"OS\":\"linux\"}]},\"Networks\":[{\"Target\":\"p7n80hb6vsmkh837l8iteadcx\",\"Aliases\":[\"gateway\"]},{\"Target\":\"q86b9xwe8328xuxggsn61yufv\",\"Aliases\":[\"gateway\"]}],\"LogDriver\":{\"Name\":\"journald\"},\"ForceUpdate\":0,\"Runtime\":\"container\"},\"Mode\":{\"Replicated\":{\"Replicas\":1}},\"UpdateConfig\":{\"Parallelism\":1,\"Delay\":5000000000,\"FailureAction\":\"rollback\",\"MaxFailureRatio\":0,\"Order\":\"stop-first\"},\"EndpointSpec\":{\"Mode\":\"dnsrr\"}},\"Endpoint\":{\"Spec\":[]}}',	'[{\"ID\":\"o1dw19jkjpactput1ddsazrci\",\"Version\":{\"Index\":55},\"CreatedAt\":\"2021-02-08T18:09:59.10354636Z\",\"UpdatedAt\":\"2021-02-08T18:11:48.973935727Z\",\"Labels\":{},\"Spec\":{\"ContainerSpec\":{\"Image\":\"bayrell/bus_gateway:0.3.0@sha256:b328587f868ac8063f9641df6f1c1ff8193c206ea1bfb35b846fc4a60ab6e93f\",\"Labels\":{\"com.docker.stack.namespace\":\"cloud_os\"},\"Hostname\":\"{{.Service.Name}}.{{.Task.ID}}.local\",\"Env\":[\"AMQP_HOST=cloud_os_rabbitmq\",\"AMQP_PORT=5672\",\"CLOUD_BUS_GATEWAY=cloud_os_gateway\",\"CLOUD_KEY=GXBMBGadMWNk5hBtHwT4tzDcSgZSJEMeAAd3arBeZsf7mIrcu1Zk0kjyICuCuJGURYUyW7K81qlneDad65u5pF4Ze5o1qT3sdeBVeLweCGcQFbbnjJ9aAzXJvifav37s\",\"DOCKER=1\",\"MYSQL_HOST=database_mysql_node1\",\"MYSQL_PASSWORD=BUPeC2ONqj7dl63V\",\"MYSQL_ROOT_PASSWORD=BUPeC2ONqj7dl63V\",\"MYSQL_ROOT_USERNAME=root\",\"MYSQL_USERNAME=root\",\"NODE_ID={{.Node.ID}}\",\"SERVICE_ID={{.Service.ID}}\",\"TASK_ID={{.Task.ID}}\"],\"Privileges\":{\"CredentialSpec\":null,\"SELinuxContext\":null},\"Isolation\":\"default\"},\"Resources\":{},\"RestartPolicy\":{\"Condition\":\"on-failure\",\"Delay\":10000000000,\"MaxAttempts\":0,\"Window\":120000000000},\"Placement\":{\"Constraints\":[\"node.labels.name == docker0\"],\"Platforms\":[{\"Architecture\":\"amd64\",\"OS\":\"linux\"},{\"OS\":\"linux\"}]},\"Networks\":[{\"Target\":\"p7n80hb6vsmkh837l8iteadcx\",\"Aliases\":[\"gateway\"]},{\"Target\":\"q86b9xwe8328xuxggsn61yufv\",\"Aliases\":[\"gateway\"]}],\"LogDriver\":{\"Name\":\"journald\"},\"ForceUpdate\":0},\"ServiceID\":\"kb2tuo88k1zx8wkpemykac7s4\",\"Slot\":1,\"NodeID\":\"jfx6fpd23tqvqur5ne7oha08r\",\"Status\":{\"Timestamp\":\"2021-02-08T18:11:48.77104357Z\",\"State\":\"running\",\"Message\":\"started\",\"ContainerStatus\":{\"ContainerID\":\"537d1ea832765e8f0501fa005f315b40d44d5d9f0ea792ffebc5aa2bd890ded2\",\"PID\":4571,\"ExitCode\":0},\"PortStatus\":{}},\"DesiredState\":\"running\",\"NetworksAttachments\":[{\"Network\":{\"ID\":\"p7n80hb6vsmkh837l8iteadcx\",\"Version\":{\"Index\":14},\"CreatedAt\":\"2021-02-08T18:09:50.261268673Z\",\"UpdatedAt\":\"2021-02-08T18:09:50.26966085Z\",\"Spec\":{\"Name\":\"cloud_backend\",\"Labels\":{},\"DriverConfiguration\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.bridge.name\":\"cloud_backend\"}},\"Attachable\":true,\"IPAMOptions\":{\"Driver\":{\"Name\":\"default\"},\"Configs\":[{\"Subnet\":\"172.22.0.1/16\",\"Gateway\":\"172.22.0.1\"}]},\"Scope\":\"swarm\"},\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.bridge.name\":\"cloud_backend\",\"com.docker.network.driver.overlay.vxlanid_list\":\"4098\"}},\"IPAMOptions\":{\"Driver\":{\"Name\":\"default\"},\"Configs\":[{\"Subnet\":\"172.22.0.1/16\",\"Gateway\":\"172.22.0.1\"}]}},\"Addresses\":[\"172.22.0.3/16\"]},{\"Network\":{\"ID\":\"q86b9xwe8328xuxggsn61yufv\",\"Version\":{\"Index\":12},\"CreatedAt\":\"2021-02-08T18:09:50.171587926Z\",\"UpdatedAt\":\"2021-02-08T18:09:50.214614804Z\",\"Spec\":{\"Name\":\"cloud_frontend\",\"Labels\":{},\"DriverConfiguration\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.bridge.name\":\"cloud_frontend\"}},\"Attachable\":true,\"IPAMOptions\":{\"Driver\":{\"Name\":\"default\"},\"Configs\":[{\"Subnet\":\"172.21.0.1/16\",\"Gateway\":\"172.21.0.1\"}]},\"Scope\":\"swarm\"},\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.bridge.name\":\"cloud_frontend\",\"com.docker.network.driver.overlay.vxlanid_list\":\"4097\"}},\"IPAMOptions\":{\"Driver\":{\"Name\":\"default\"},\"Configs\":[{\"Subnet\":\"172.21.0.1/16\",\"Gateway\":\"172.21.0.1\"}]}},\"Addresses\":[\"172.21.0.2/16\"]}]}]\n',	'{\"State\":{\"Work\":1,\"Total\":1},\"Tasks\":[{\"ID\":\"o1dw19jkjpactput1ddsazrci\",\"Status\":{\"Timestamp\":\"2021-02-08T18:11:48.77104357Z\",\"State\":\"running\",\"Message\":\"started\",\"ContainerStatus\":{\"ContainerID\":\"537d1ea832765e8f0501fa005f315b40d44d5d9f0ea792ffebc5aa2bd890ded2\",\"PID\":4571,\"ExitCode\":0},\"PortStatus\":[]},\"DesiredState\":\"running\",\"Slot\":1,\"Node\":{\"ID\":\"jfx6fpd23tqvqur5ne7oha08r\",\"Hostname\":\"www0\",\"Status\":{\"State\":\"ready\",\"Addr\":\"172.30.0.30\"}},\"Networks\":[{\"ID\":\"p7n80hb6vsmkh837l8iteadcx\",\"Name\":\"cloud_backend\",\"Addresses\":[\"172.22.0.3\\/16\"]},{\"ID\":\"q86b9xwe8328xuxggsn61yufv\",\"Name\":\"cloud_frontend\",\"Addresses\":[\"172.21.0.2\\/16\"]}]}]}',	1612808941),
(6,	'cloud_os',	'http',	'',	0,	0,	'',	'',	1,	0,	NULL,	'cloud_os_http',	'bayrell/load_balancer_http:0.3.0@sha256:35ab4af3b73d68602c4c2575f13974fa33e23dfea08d883c2f0defeaaae94f70',	'',	'{\"ID\":\"uyyjg2zsqtzcvfylvrznwp719\",\"Version\":{\"Index\":77},\"CreatedAt\":\"2021-02-08T18:10:05.466532555Z\",\"UpdatedAt\":\"2021-02-08T18:27:58.788464575Z\",\"Spec\":{\"Name\":\"cloud_os_http\",\"Labels\":{\"com.docker.stack.image\":\"bayrell\\/load_balancer_http:0.3.0\",\"com.docker.stack.namespace\":\"cloud_os\"},\"TaskTemplate\":{\"ContainerSpec\":{\"Image\":\"bayrell\\/load_balancer_http:0.3.0@sha256:35ab4af3b73d68602c4c2575f13974fa33e23dfea08d883c2f0defeaaae94f70\",\"Labels\":{\"com.docker.stack.namespace\":\"cloud_os\"},\"Hostname\":\"{{.Service.Name}}.{{.Task.ID}}.local\",\"Env\":[\"AMQP_HOST=cloud_os_rabbitmq\",\"AMQP_PORT=5672\",\"CLOUD_BUS_GATEWAY=cloud_os_gateway\",\"CLOUD_KEY=GXBMBGadMWNk5hBtHwT4tzDcSgZSJEMeAAd3arBeZsf7mIrcu1Zk0kjyICuCuJGURYUyW7K81qlneDad65u5pF4Ze5o1qT3sdeBVeLweCGcQFbbnjJ9aAzXJvifav37s\",\"DOCKER=1\",\"MYSQL_HOST=database_mysql_node1\",\"MYSQL_PASSWORD=BUPeC2ONqj7dl63V\",\"MYSQL_ROOT_PASSWORD=BUPeC2ONqj7dl63V\",\"MYSQL_ROOT_USERNAME=root\",\"MYSQL_USERNAME=root\",\"NODE_ID={{.Node.ID}}\",\"SERVICE_ID={{.Service.ID}}\",\"TASK_ID={{.Task.ID}}\"],\"Privileges\":{\"CredentialSpec\":null,\"SELinuxContext\":null},\"Mounts\":[{\"Type\":\"volume\",\"Source\":\"cloud_os_http_data\",\"Target\":\"\\/data\",\"VolumeOptions\":{\"Labels\":{\"com.docker.stack.namespace\":\"cloud_os\"}}}],\"Isolation\":\"default\"},\"Resources\":[],\"RestartPolicy\":{\"Condition\":\"on-failure\",\"Delay\":10000000000,\"MaxAttempts\":0,\"Window\":120000000000},\"Placement\":{\"Constraints\":[\"node.labels.name == docker0\"],\"Platforms\":[{\"Architecture\":\"amd64\",\"OS\":\"linux\"},{\"OS\":\"linux\"}]},\"Networks\":[{\"Target\":\"q86b9xwe8328xuxggsn61yufv\",\"Aliases\":[\"http\"]}],\"LogDriver\":{\"Name\":\"journald\"},\"ForceUpdate\":0,\"Runtime\":\"container\"},\"Mode\":{\"Replicated\":{\"Replicas\":1}},\"UpdateConfig\":{\"Parallelism\":1,\"Delay\":5000000000,\"FailureAction\":\"rollback\",\"MaxFailureRatio\":0,\"Order\":\"stop-first\"},\"EndpointSpec\":{\"Mode\":\"dnsrr\",\"Ports\":[{\"Protocol\":\"tcp\",\"TargetPort\":80,\"PublishedPort\":80,\"PublishMode\":\"host\"}]}},\"PreviousSpec\":{\"Name\":\"cloud_os_http\",\"Labels\":{\"com.docker.stack.image\":\"bayrell\\/load_balancer_http:0.3.0\",\"com.docker.stack.namespace\":\"cloud_os\"},\"TaskTemplate\":{\"ContainerSpec\":{\"Image\":\"bayrell\\/load_balancer_http:0.3.0@sha256:35ab4af3b73d68602c4c2575f13974fa33e23dfea08d883c2f0defeaaae94f70\",\"Labels\":{\"com.docker.stack.namespace\":\"cloud_os\"},\"Hostname\":\"{{.Service.Name}}.{{.Task.ID}}.local\",\"Env\":[\"AMQP_HOST=cloud_os_rabbitmq\",\"AMQP_PORT=5672\",\"CLOUD_BUS_GATEWAY=cloud_os_gateway\",\"CLOUD_KEY=GXBMBGadMWNk5hBtHwT4tzDcSgZSJEMeAAd3arBeZsf7mIrcu1Zk0kjyICuCuJGURYUyW7K81qlneDad65u5pF4Ze5o1qT3sdeBVeLweCGcQFbbnjJ9aAzXJvifav37s\",\"DOCKER=1\",\"MYSQL_HOST=database_mysql_node1\",\"MYSQL_PASSWORD=BUPeC2ONqj7dl63V\",\"MYSQL_ROOT_PASSWORD=BUPeC2ONqj7dl63V\",\"MYSQL_ROOT_USERNAME=root\",\"MYSQL_USERNAME=root\",\"NODE_ID={{.Node.ID}}\",\"SERVICE_ID={{.Service.ID}}\",\"TASK_ID={{.Task.ID}}\"],\"Privileges\":{\"CredentialSpec\":null,\"SELinuxContext\":null},\"Mounts\":[{\"Type\":\"volume\",\"Source\":\"cloud_os_http_data\",\"Target\":\"\\/data\",\"VolumeOptions\":{\"Labels\":{\"com.docker.stack.namespace\":\"cloud_os\"}}}],\"Isolation\":\"default\"},\"Resources\":[],\"RestartPolicy\":{\"Condition\":\"on-failure\",\"Delay\":10000000000,\"MaxAttempts\":0,\"Window\":120000000000},\"Placement\":{\"Constraints\":[\"node.labels.name == docker0\"],\"Platforms\":[{\"Architecture\":\"amd64\",\"OS\":\"linux\"},{\"OS\":\"linux\"}]},\"Networks\":[{\"Target\":\"q86b9xwe8328xuxggsn61yufv\",\"Aliases\":[\"http\"]}],\"LogDriver\":{\"Name\":\"journald\"},\"ForceUpdate\":0,\"Runtime\":\"container\"},\"Mode\":{\"Replicated\":{\"Replicas\":1}},\"UpdateConfig\":{\"Parallelism\":1,\"Delay\":5000000000,\"FailureAction\":\"rollback\",\"MaxFailureRatio\":0,\"Order\":\"stop-first\"},\"EndpointSpec\":{\"Mode\":\"dnsrr\",\"Ports\":[{\"Protocol\":\"tcp\",\"TargetPort\":80,\"PublishedPort\":80,\"PublishMode\":\"host\"}]}},\"Endpoint\":{\"Spec\":{\"Mode\":\"dnsrr\",\"Ports\":[{\"Protocol\":\"tcp\",\"TargetPort\":80,\"PublishedPort\":80,\"PublishMode\":\"host\"}]},\"Ports\":[{\"Protocol\":\"tcp\",\"TargetPort\":80,\"PublishedPort\":80,\"PublishMode\":\"host\"}]}}',	'[{\"ID\":\"3h3qrn8k6ramvbht9ti5nkd88\",\"Version\":{\"Index\":54},\"CreatedAt\":\"2021-02-08T18:10:05.547763218Z\",\"UpdatedAt\":\"2021-02-08T18:11:48.834550069Z\",\"Labels\":{},\"Spec\":{\"ContainerSpec\":{\"Image\":\"bayrell/load_balancer_http:0.3.0@sha256:35ab4af3b73d68602c4c2575f13974fa33e23dfea08d883c2f0defeaaae94f70\",\"Labels\":{\"com.docker.stack.namespace\":\"cloud_os\"},\"Hostname\":\"{{.Service.Name}}.{{.Task.ID}}.local\",\"Env\":[\"AMQP_HOST=cloud_os_rabbitmq\",\"AMQP_PORT=5672\",\"CLOUD_BUS_GATEWAY=cloud_os_gateway\",\"CLOUD_KEY=GXBMBGadMWNk5hBtHwT4tzDcSgZSJEMeAAd3arBeZsf7mIrcu1Zk0kjyICuCuJGURYUyW7K81qlneDad65u5pF4Ze5o1qT3sdeBVeLweCGcQFbbnjJ9aAzXJvifav37s\",\"DOCKER=1\",\"MYSQL_HOST=database_mysql_node1\",\"MYSQL_PASSWORD=BUPeC2ONqj7dl63V\",\"MYSQL_ROOT_PASSWORD=BUPeC2ONqj7dl63V\",\"MYSQL_ROOT_USERNAME=root\",\"MYSQL_USERNAME=root\",\"NODE_ID={{.Node.ID}}\",\"SERVICE_ID={{.Service.ID}}\",\"TASK_ID={{.Task.ID}}\"],\"Privileges\":{\"CredentialSpec\":null,\"SELinuxContext\":null},\"Mounts\":[{\"Type\":\"volume\",\"Source\":\"cloud_os_http_data\",\"Target\":\"/data\",\"VolumeOptions\":{\"Labels\":{\"com.docker.stack.namespace\":\"cloud_os\"}}}],\"Isolation\":\"default\"},\"Resources\":{},\"RestartPolicy\":{\"Condition\":\"on-failure\",\"Delay\":10000000000,\"MaxAttempts\":0,\"Window\":120000000000},\"Placement\":{\"Constraints\":[\"node.labels.name == docker0\"],\"Platforms\":[{\"Architecture\":\"amd64\",\"OS\":\"linux\"},{\"OS\":\"linux\"}]},\"Networks\":[{\"Target\":\"q86b9xwe8328xuxggsn61yufv\",\"Aliases\":[\"http\"]}],\"LogDriver\":{\"Name\":\"journald\"},\"ForceUpdate\":0},\"ServiceID\":\"uyyjg2zsqtzcvfylvrznwp719\",\"Slot\":1,\"NodeID\":\"jfx6fpd23tqvqur5ne7oha08r\",\"Status\":{\"Timestamp\":\"2021-02-08T18:11:48.393231707Z\",\"State\":\"running\",\"Message\":\"started\",\"ContainerStatus\":{\"ContainerID\":\"9b490063d4b4a2ff306477b9fc5d5b8fa98194516240a0a486bae80aa14ff4d8\",\"PID\":4572,\"ExitCode\":0},\"PortStatus\":{\"Ports\":[{\"Protocol\":\"tcp\",\"TargetPort\":80,\"PublishedPort\":80,\"PublishMode\":\"host\"}]}},\"DesiredState\":\"running\",\"NetworksAttachments\":[{\"Network\":{\"ID\":\"q86b9xwe8328xuxggsn61yufv\",\"Version\":{\"Index\":12},\"CreatedAt\":\"2021-02-08T18:09:50.171587926Z\",\"UpdatedAt\":\"2021-02-08T18:09:50.214614804Z\",\"Spec\":{\"Name\":\"cloud_frontend\",\"Labels\":{},\"DriverConfiguration\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.bridge.name\":\"cloud_frontend\"}},\"Attachable\":true,\"IPAMOptions\":{\"Driver\":{\"Name\":\"default\"},\"Configs\":[{\"Subnet\":\"172.21.0.1/16\",\"Gateway\":\"172.21.0.1\"}]},\"Scope\":\"swarm\"},\"DriverState\":{\"Name\":\"overlay\",\"Options\":{\"com.docker.network.bridge.name\":\"cloud_frontend\",\"com.docker.network.driver.overlay.vxlanid_list\":\"4097\"}},\"IPAMOptions\":{\"Driver\":{\"Name\":\"default\"},\"Configs\":[{\"Subnet\":\"172.21.0.1/16\",\"Gateway\":\"172.21.0.1\"}]}},\"Addresses\":[\"172.21.0.3/16\"]}]}]\n',	'{\"State\":{\"Work\":1,\"Total\":1},\"Tasks\":[{\"ID\":\"3h3qrn8k6ramvbht9ti5nkd88\",\"Status\":{\"Timestamp\":\"2021-02-08T18:11:48.393231707Z\",\"State\":\"running\",\"Message\":\"started\",\"ContainerStatus\":{\"ContainerID\":\"9b490063d4b4a2ff306477b9fc5d5b8fa98194516240a0a486bae80aa14ff4d8\",\"PID\":4572,\"ExitCode\":0},\"PortStatus\":{\"Ports\":[{\"Protocol\":\"tcp\",\"TargetPort\":80,\"PublishedPort\":80,\"PublishMode\":\"host\"}]}},\"DesiredState\":\"running\",\"Slot\":1,\"Node\":{\"ID\":\"jfx6fpd23tqvqur5ne7oha08r\",\"Hostname\":\"www0\",\"Status\":{\"State\":\"ready\",\"Addr\":\"172.30.0.30\"}},\"Networks\":[{\"ID\":\"q86b9xwe8328xuxggsn61yufv\",\"Name\":\"cloud_frontend\",\"Addresses\":[\"172.21.0.3\\/16\"]}]}]}',	1612808941);

DROP TABLE IF EXISTS `spaces`;
CREATE TABLE `spaces` (
  `space_id` bigint(20) NOT NULL AUTO_INCREMENT,
  `api_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  PRIMARY KEY (`space_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;


DROP TABLE IF EXISTS `stacks`;
CREATE TABLE `stacks` (
  `stack_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;


DROP TABLE IF EXISTS `top_menu`;
CREATE TABLE `top_menu` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `href` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `pos` bigint(20) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;


DROP TABLE IF EXISTS `users`;
CREATE TABLE `users` (
  `user_id` bigint(20) NOT NULL AUTO_INCREMENT,
  `login` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `banned` tinyint(4) NOT NULL,
  `is_deleted` tinyint(4) NOT NULL,
  PRIMARY KEY (`user_id`),
  UNIQUE KEY `login` (`login`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;


DROP TABLE IF EXISTS `users_auth`;
CREATE TABLE `users_auth` (
  `user_id` bigint(20) NOT NULL,
  `method` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `value` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  UNIQUE KEY `user_id_method` (`user_id`,`method`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;


-- 2021-02-08 18:29:07